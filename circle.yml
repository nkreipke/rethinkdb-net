machine:
  environment:
    USE_SYSTEM_NUNIT_CONSOLE: 1

dependencies:
  pre:
    - source /etc/lsb-release && echo "deb http://download.rethinkdb.com/apt $DISTRIB_CODENAME main" | sudo tee /etc/apt/sources.list.d/rethinkdb.list
    - wget -qO- http://download.rethinkdb.com/apt/pubkey.gpg | sudo apt-key add -
    - sudo apt-get update
    - sudo apt-get install rethinkdb=2.0.0+1~0precise curl libunwind8 gettext
    - curl -sSL -o dotnet.tar.gz https://go.microsoft.com/fwlink/?LinkID=827530
    - sudo mkdir -p /opt/dotnet && sudo tar zxf dotnet.tar.gz -C /opt/dotnet
    - sudo ln -s /opt/dotnet/dotnet /usr/local/bin

test:
  override:
    - dotnet restore
    - dotnet test rethinkdb-net-test
